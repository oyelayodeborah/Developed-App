@using System.Web.Optimization
@model KABE_Food_Ordering_System.Models.User
@{
    ViewBag.Title = "Log in";
    Layout = null;
}

@Styles.Render("~/Bundles/css")

@using (Html.BeginForm("Login", "Account"))
{



<div class=" form-signin">
    <div class="text-center  mb-4">
        <div class="text-center">
            <h1 class="welcome welcome-div">KABE</h1>
        </div>
        <h4>Sign in to start your session!</h4>
        <br />
    </div>
    @if (ViewBag.Message != null)
    {
        if (ViewBag.Message.ToString() == "Success")
        {
            <div class="alert alert-success">
                <p>@ViewBag.Message <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> </p>

            </div>

        }
        else
        {
            <div class="alert alert-danger">
                <strong>Error!&nbsp;</strong> @ViewBag.Message
            </div>
        }

    }


    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="form-group has-feedback">
        <input type="email" class="form-control" placeholder="Email Address" name="Email" id="email" maxlength=255 required>
        <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
    </div>
    <div class="form-group has-feedback">
        <input type="password" class="form-control" placeholder="Password" name="Password" validateRequest="false" maxlength="30" id="passwordHash">
        <span class="glyphicon glyphicon-lock form-control-feedback"></span>
    </div>

    <div class="form-group">
        <button class="btn btn-lg btn-block " onmouseover="this.style.color = '#333', this.style.background='#ddd'" onmouseout="this.style.color = '#ddd', this.style.background='#333'" type="submit" style="background-color:#333;color:#ddd;">Log in&emsp;<i class="fa fa-sign-in"></i></button>
    </div>
    <br />
    @{
        var getRole = new KABE_Food_Ordering_System.Logic.RoleLogic().GetByName("Customer");
        if (getRole != null)
        {
            <div class="form-group" style="text-align:center">
                <a href=@Url.Action("Register","User") style="text-align:center">Register as a customer</a>
            </div>
        }
        else
        {
            <div class="form-group" style="text-align:center">
                <p style="font-style:italic;">This app have not being setup for customers</p>
            </div>
        }
    }

    <p class="mt-5 mb-3 text-muted text-center"><b>KABE</b> &copy; @DateTime.Now.Year</p>

</div>
}
@section ViewSpecificJavascript
    {
    <script>
        $(document).ready(function () {
            setTimeout(function () {
                $(".alert").fadeOut(100, null);
            },
                3000);
        })
    </script>
}